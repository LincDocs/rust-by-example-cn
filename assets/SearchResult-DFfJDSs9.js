import{l as N,u as X,m as U,n as Z,y as tt,t as et,p as lt,q as L,v as x,x as l,z as st,w as rt,A as it,R as T,B as ot,D as mt,E as at,F as nt,G as ct,H as $,J as F,K as ut,L as ht,M as pt,N as dt,O as _t,Q as vt,S as yt,T as ft,U as j,V as gt,W as k}from"./app-CY03Lsxp.js";const wt=["/SUMMARY.html","/attribute.html","/cargo.html","/compatibility.html","/conversion.html","/crates.html","/custom_types.html","/error.html","/expression.html","/flow_control.html","/fn.html","/generics.html","/hello.html","/","/macros.html","/meta.html","/mod.html","/primitives.html","/scope.html","/std.html","/std_misc.html","/testing.html","/trait.html","/types.html","/unsafe.html","/variable_bindings.html","/attribute/cfg.html","/attribute/crate.html","/attribute/unused.html","/cargo/build_scripts.html","/cargo/conventions.html","/cargo/deps.html","/cargo/test.html","/compatibility/raw_identifiers.html","/conversion/from_into.html","/conversion/string.html","/conversion/try_from_try_into.html","/crates/lib.html","/crates/using_lib.html","/custom_types/constants.html","/custom_types/enum.html","/custom_types/structs.html","/error/iter_result.html","/error/multiple_error_types.html","/error/option_unwrap.html","/error/panic.html","/error/result.html","/flow_control/for.html","/flow_control/if_else.html","/flow_control/if_let.html","/flow_control/loop.html","/flow_control/match.html","/flow_control/while.html","/flow_control/while_let.html","/fn/closures.html","/fn/diverging.html","/fn/hof.html","/fn/methods.html","/generics/assoc_items.html","/generics/bounds.html","/generics/gen_fn.html","/generics/gen_trait.html","/generics/impl.html","/generics/multi_bounds.html","/generics/new_types.html","/generics/phantom.html","/generics/where.html","/hello/comment.html","/hello/print.html","/macros/designators.html","/macros/dry.html","/macros/dsl.html","/macros/overload.html","/macros/repeat.html","/macros/syntax.html","/macros/variadics.html","/meta/doc.html","/meta/playpen.html","/mod/split.html","/mod/struct_visibility.html","/mod/super.html","/mod/use.html","/mod/visibility.html","/primitives/array.html","/primitives/literals.html","/primitives/tuples.html","/scope/borrow.html","/scope/lifetime.html","/scope/move.html","/scope/raii.html","/std/arc.html","/std/box.html","/std/hash.html","/std/option.html","/std/panic.html","/std/rc.html","/std/result.html","/std/str.html","/std/vec.html","/std_misc/arg.html","/std_misc/channels.html","/std_misc/ffi.html","/std_misc/file.html","/std_misc/fs.html","/std_misc/life.html","/std_misc/path.html","/std_misc/process.html","/std_misc/threads.html","/testing/dev_dependencies.html","/testing/doc_testing.html","/testing/integration_testing.html","/testing/unit_testing.html","/trait/clone.html","/trait/derive.html","/trait/disambiguating.html","/trait/drop.html","/trait/dyn.html","/trait/impl_trait.html","/trait/iter.html","/trait/ops.html","/trait/supertraits.html","/types/alias.html","/types/cast.html","/types/inference.html","/types/literals.html","/variable_bindings/declare.html","/variable_bindings/freeze.html","/variable_bindings/mut.html","/variable_bindings/scope.html","/attribute/cfg/custom.html","/custom_types/enum/c_like.html","/custom_types/enum/enum_use.html","/custom_types/enum/testcase_linked_list.html","/error/multiple_error_types/boxing_errors.html","/error/multiple_error_types/define_error_type.html","/error/multiple_error_types/option_result.html","/error/multiple_error_types/reenter_question_mark.html","/error/multiple_error_types/wrap_error.html","/error/option_unwrap/and_then.html","/error/option_unwrap/map.html","/error/option_unwrap/question_mark.html","/error/result/early_returns.html","/error/result/enter_question_mark.html","/error/result/result_alias.html","/error/result/result_map.html","/flow_control/loop/nested.html","/flow_control/loop/return.html","/flow_control/match/binding.html","/flow_control/match/destructuring.html","/flow_control/match/guard.html","/fn/closures/anonymity.html","/fn/closures/capture.html","/fn/closures/closure_examples.html","/fn/closures/input_functions.html","/fn/closures/input_parameters.html","/fn/closures/output_parameters.html","/generics/assoc_items/the_problem.html","/generics/assoc_items/types.html","/generics/bounds/testcase_empty.html","/generics/phantom/testcase_units.html","/hello/print/fmt.html","/hello/print/print_debug.html","/hello/print/print_display.html","/scope/borrow/alias.html","/scope/borrow/freeze.html","/scope/borrow/mut.html","/scope/borrow/ref.html","/scope/lifetime/elision.html","/scope/lifetime/explicit.html","/scope/lifetime/fn.html","/scope/lifetime/lifetime_bounds.html","/scope/lifetime/lifetime_coercion.html","/scope/lifetime/methods.html","/scope/lifetime/static_lifetime.html","/scope/lifetime/struct.html","/scope/lifetime/trait.html","/scope/move/mut.html","/scope/move/partial_move.html","/std/hash/alt_key_types.html","/std/hash/hashset.html","/std/result/question_mark.html","/std_misc/arg/matching.html","/std_misc/file/create.html","/std_misc/file/open.html","/std_misc/file/read_lines.html","/std_misc/process/pipe.html","/std_misc/process/wait.html","/std_misc/threads/testcase_mapreduce.html","/flow_control/match/destructuring/destructure_enum.html","/flow_control/match/destructuring/destructure_pointers.html","/flow_control/match/destructuring/destructure_slice.html","/flow_control/match/destructuring/destructure_structures.html","/flow_control/match/destructuring/destructure_tuple.html","/fn/closures/closure_examples/iter_any.html","/fn/closures/closure_examples/iter_find.html","/hello/print/print_display/testcase_list.html","/404.html","/attribute/","/cargo/","/compatibility/","/conversion/","/crates/","/custom_types/","/error/","/flow_control/","/fn/","/generics/","/hello/","/macros/","/meta/","/mod/","/primitives/","/scope/","/std/","/std_misc/","/testing/","/trait/","/types/","/variable_bindings/","/attribute/cfg/","/custom_types/enum/","/error/multiple_error_types/","/error/option_unwrap/","/error/result/","/flow_control/loop/","/flow_control/match/","/fn/closures/","/generics/assoc_items/","/generics/bounds/","/generics/phantom/","/hello/print/","/scope/borrow/","/scope/lifetime/","/scope/move/","/std/hash/","/std/result/","/std_misc/arg/","/std_misc/file/","/std_misc/process/","/std_misc/threads/","/flow_control/match/destructuring/","/fn/closures/closure_examples/","/hello/print/print_display/","/category/","/tag/","/Blog/","/star/","/timeline/"],bt="SLIMSEARCH_QUERY_HISTORY",v=j(bt,[]),xt=()=>{const{queryHistoryCount:r}=k;return{enabled:r>0,queryHistories:v,addQueryHistory:m=>{v.value=Array.from(new Set([m,...v.value.slice(0,r-1)]))},removeQueryHistory:m=>{v.value=[...v.value.slice(0,m),...v.value.slice(m+1)]}}},D=r=>wt[r.id]+("anchor"in r?`#${r.anchor}`:""),kt="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:M}=k,y=j(kt,[]),Ht=()=>({enabled:M>0,resultHistories:y,addResultHistory:o=>{{const m={link:D(o),display:o.display};"header"in o&&(m.header=o.header),y.value=[m,...y.value.slice(0,M-1)]}},removeResultHistory:o=>{y.value=[...y.value.slice(0,o),...y.value.slice(o+1)]}}),qt=r=>{const o=ut(),m=U(),H=ht(),a=L(0),f=x(()=>a.value>0),u=pt([]);return dt(()=>{const{search:q,terminate:p}=_t(),g=yt(d=>{const{resultsFilter:R=s=>s,querySplitter:_,suggestionsFilter:A,...i}=o.value;d?(a.value+=1,q(d,m.value,i).then(s=>R(s,d,m.value,H.value)).then(s=>{a.value-=1,u.value=s}).catch(s=>{console.warn(s),a.value-=1,a.value||(u.value=[])})):u.value=[]},k.searchDelay-k.suggestDelay,{maxWait:5e3});vt([r,m],([d])=>g(d.join(" "))),ft(()=>{p()})}),{isSearching:f,results:u}};var Qt=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:o}){const m=X(),H=U(),a=Z(tt),{addQueryHistory:f,queryHistories:u,removeQueryHistory:q}=xt(),{resultHistories:p,addResultHistory:g,removeResultHistory:d}=Ht(),R=et(r,"queries"),{results:_,isSearching:A}=qt(R),i=lt({isQuery:!0,index:0}),s=L(0),h=L(0),E=x(()=>u.value.length>0||p.value.length>0),Q=x(()=>_.value.length>0),S=x(()=>_.value[s.value]||null),O=()=>{const{isQuery:t,index:e}=i;e===0?(i.isQuery=!t,i.index=t?p.value.length-1:u.value.length-1):i.index=e-1},P=()=>{const{isQuery:t,index:e}=i;e===(t?u.value.length-1:p.value.length-1)?(i.isQuery=!t,i.index=0):i.index=e+1},Y=()=>{s.value=s.value>0?s.value-1:_.value.length-1,h.value=S.value.contents.length-1},z=()=>{s.value=s.value<_.value.length-1?s.value+1:0,h.value=0},B=()=>{h.value<S.value.contents.length-1?h.value+=1:z()},V=()=>{h.value>0?h.value-=1:Y()},C=t=>t.map(e=>gt(e)?e:l(e[0],e[1])),W=t=>{if(t.type==="customField"){const e=nt[t.index]||"$content",[n,b=""]=ct(e)?e[H.value].split("$content"):e.split("$content");return t.display.map(c=>l("div",C([n,...c,b])))}return t.display.map(e=>l("div",C(e)))},w=()=>{s.value=0,h.value=0,o("updateQuery",""),o("close")},G=()=>l("ul",{class:"slimsearch-result-list"},l("li",{class:"slimsearch-result-list-item"},[l("div",{class:"slimsearch-result-title"},a.value.queryHistory),u.value.map((t,e)=>l("div",{class:["slimsearch-result-item",{active:i.isQuery&&i.index===e}],onClick:()=>{o("updateQuery",t)}},[l($,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},t),l("button",{class:"slimsearch-remove-icon",innerHTML:F,onClick:n=>{n.preventDefault(),n.stopPropagation(),q(e)}})]))])),J=()=>l("ul",{class:"slimsearch-result-list"},l("li",{class:"slimsearch-result-list-item"},[l("div",{class:"slimsearch-result-title"},a.value.resultHistory),p.value.map((t,e)=>l(T,{to:t.link,class:["slimsearch-result-item",{active:!i.isQuery&&i.index===e}],onClick:()=>{w()}},()=>[l($,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},[t.header?l("div",{class:"content-header"},t.header):null,l("div",t.display.map(n=>C(n)).flat())]),l("button",{class:"slimsearch-remove-icon",innerHTML:F,onClick:n=>{n.preventDefault(),n.stopPropagation(),d(e)}})]))]));return st("keydown",t=>{if(r.isFocusing){if(Q.value){if(t.key==="ArrowUp")V();else if(t.key==="ArrowDown")B();else if(t.key==="Enter"){const e=S.value.contents[h.value];f(r.queries.join(" ")),g(e),m.push(D(e)),w()}}else if(t.key==="ArrowUp")O();else if(t.key==="ArrowDown")P();else if(t.key==="Enter"){const{index:e}=i;i.isQuery?(o("updateQuery",u.value[e]),t.preventDefault()):(m.push(p.value[e].link),w())}}}),rt([s,h],()=>{var t;(t=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||t.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["slimsearch-result-wrapper",{empty:r.queries.length?!Q.value:!E.value}],id:"slimsearch-results"},r.queries.length?A.value?l(it,{hint:a.value.searching}):Q.value?l("ul",{class:"slimsearch-result-list"},_.value.map(({title:t,contents:e},n)=>{const b=s.value===n;return l("li",{class:["slimsearch-result-list-item",{active:b}]},[l("div",{class:"slimsearch-result-title"},t||a.value.defaultTitle),e.map((c,K)=>{const I=b&&h.value===K;return l(T,{to:D(c),class:["slimsearch-result-item",{active:I,"aria-selected":I}],onClick:()=>{f(r.queries.join(" ")),g(c),w()}},()=>[c.type==="text"?null:l(c.type==="title"?ot:c.type==="heading"?mt:at,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},[c.type==="text"&&c.header?l("div",{class:"content-header"},c.header):null,l("div",W(c))])])})])})):a.value.emptyResult:E.value?[G(),J()]:a.value.emptyHistory)}});export{Qt as default};
